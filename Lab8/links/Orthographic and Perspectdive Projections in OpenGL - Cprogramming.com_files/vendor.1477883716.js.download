function FastClick(e,t){"use strict";function n(e,t){return function(){return e.apply(t,arguments)}}var r;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||50,this.layer=e,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=this,a=0,s=o.length;s>a;a++)i[o[a]]=n(i[o[a]],i);deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,r):o.call(e,t,n,r)},e.addEventListener=function(t,n,r){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):o.call(e,t,n,r)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(e){r(e)},!1),e.onclick=null)}}window.Modernizr=function(e,t,n){function r(e){y.cssText=e}function o(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&y[o]!==n)return"pfx"==t?o:!0}return!1}function s(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function c(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+S.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+C.join(r+" ")+r).split(" "),s(i,t,n))}function u(){p.inputtypes=function(e){for(var r,o,i,a=0,s=e.length;s>a;a++)b.setAttribute("type",o=e[a]),r="text"!==b.type,r&&(b.value=_,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&b.style.WebkitAppearance!==n?(m.appendChild(b),i=t.defaultView,r=i.getComputedStyle&&"textfield"!==i.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,m.removeChild(b)):/^(search|tel)$/.test(o)||(r=/^(url|email)$/.test(o)?b.checkValidity&&b.checkValidity()===!1:b.value!=_)),T[e[a]]=!!r;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,f,d="2.8.3",p={},h=!0,m=t.documentElement,v="modernizr",g=t.createElement(v),y=g.style,b=t.createElement("input"),_=":)",x=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),w="Webkit Moz O ms",S=w.split(" "),C=w.toLowerCase().split(" "),E={},T={},k=[],O=k.slice,j=function(e,n,r,o){var i,a,s,c,u=t.createElement("div"),l=t.body,f=l||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=o?o[r]:v+(r+1),u.appendChild(s);return i=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),u.id=v,(l?u:f).innerHTML+=i,f.appendChild(u),l||(f.style.background="",f.style.overflow="hidden",c=m.style.overflow,m.style.overflow="hidden",m.appendChild(f)),a=n(u,e),l?u.parentNode.removeChild(u):(f.parentNode.removeChild(f),m.style.overflow=c),!!a},N={}.hasOwnProperty;f=o(N,"undefined")||o(N.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return N.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=O.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(O.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(O.call(arguments)))};return r}),E.flexbox=function(){return c("flexWrap")},E.flexboxlegacy=function(){return c("boxDirection")},E.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},E.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:j(["@media (",x.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},E.backgroundsize=function(){return c("backgroundSize")},E.cssanimations=function(){return c("animationName")},E.csstransitions=function(){return c("transition")},E.fontface=function(){var e;return j('@font-face {font-family:"font";src:url("https://")}',function(n,r){var o=t.getElementById("smodernizr"),i=o.sheet||o.styleSheet,a=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e};for(var I in E)f(E,I)&&(l=I.toLowerCase(),p[l]=E[I](),k.push((p[l]?"":"no-")+l));return p.input||u(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)f(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof h&&h&&(m.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),g=b=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=g[e[m]];return t||(t={},v++,e[m]=v,g[v]=t),t}function i(e,n,r){if(n||(n=t),l)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||p.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function a(e,n){if(e||(e=t),l)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),c=s.length;c>a;a++)i.createElement(s[a]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function c(e){e||(e=t);var r=o(e);return y.shivCSS&&!u&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||s(e,r),e}var u,l,f="3.7.0",d=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,l=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){u=!0,l=!0}}();var y={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:f,shivCSS:d.shivCSS!==!1,supportsUnknownElements:l,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:c,createElement:i,createDocumentFragment:a};e.html5=y,c(t)}(this,t),p._version=d,p._prefixes=x,p._domPrefixes=C,p._cssomPrefixes=S,p.testProp=function(e){return a([e])},p.testAllProps=c,p.testStyles=j,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+k.join(" "):""),p}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==v.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=g.shift();y=1,e?e.t?h(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):y=0}function c(e,n,r,o,i,c,u){function l(t){if(!p&&a(f.readyState)&&(b.r=p=1,!y&&s(),f.onload=f.onreadystatechange=null,t)){"img"!=e&&h(function(){x.removeChild(f)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var u=u||d.errorTimeout,f=t.createElement(e),p=0,v=0,b={t:r,s:n,e:i,a:c,x:u};1===T[n]&&(v=1,T[n]=[]),"object"==e?f.data=n:(f.src=n,f.type=e),f.width=f.height="0",f.onerror=f.onload=f.onreadystatechange=function(){l.call(this,v)},g.splice(o,0,b),"img"!=e&&(v||2===T[n]?(x.insertBefore(f,_?null:m),h(l,u)):T[n].push(f))}function u(e,t,n,r,i){return y=0,t=t||"j",o(e)?c("c"==t?S:w,e,t,this.i++,n,r,i):(g.splice(this.i++,0,e),1==g.length&&s()),this}function l(){var e=d;return e.loader={load:u,i:0},e}var f,d,p=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],v={}.toString,g=[],y=0,b="MozAppearance"in p.style,_=b&&!!t.createRange().compareNode,x=_?p:m.parentNode,p=e.opera&&"[object Opera]"==v.call(e.opera),p=!!t.attachEvent&&!p,w=b?"object":p?"script":"img",S=p?"script":w,C=Array.isArray||function(e){return"[object Array]"==v.call(e)},E=[],T={},k={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};d=function(e){function t(e){var t,n,r,e=e.split("!"),o=E.length,i=e.pop(),a=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;a>n;n++)r=e[n].split("="),(t=k[r.shift()])&&(i=t(i,r));for(n=0;o>n;n++)i=E[n](i);return i}function a(e,o,i,a,s){var c=t(e),u=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),c.instead?c.instead(e,o,i,a,s):(T[c.url]?c.noexec=!0:T[c.url]=1,i.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(r(o)||r(u))&&i.load(function(){l(),o&&o(c.origUrl,s,a),u&&u(c.origUrl,s,a),T[c.url]=2})))}function s(e,t){function n(e,n){if(e){if(o(e))n||(f=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}),a(e,f,t,0,u);else if(Object(e)===e)for(c in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(c)&&(!n&&!--s&&(r(f)?f=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}:f[c]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(d[c])),a(e[c],f,t,c,u))}else!n&&p()}var s,c,u=!!e.test,l=e.load||e.both,f=e.callback||i,d=f,p=e.complete||i;n(u?e.yep:e.nope,!!l),l&&n(l)}var c,u,f=this.yepnope.loader;if(o(e))a(e,0,f,0);else if(C(e))for(c=0;c<e.length;c++)u=e[c],o(u)?a(u,0,f,0):C(u)?d(u):Object(u)===u&&s(u,f);else Object(e)===e&&s(e,f)},d.addPrefix=function(e,t){k[e]=t},d.addFilter=function(e){E.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",f=function(){t.removeEventListener("DOMContentLoaded",f,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,o,c,u){var l,f,p=t.createElement("script"),o=o||d.errorTimeout;p.src=e;for(f in r)p.setAttribute(f,r[f]);n=u?s:n||i,p.onreadystatechange=p.onload=function(){!l&&a(p.readyState)&&(l=1,n(),p.onload=p.onreadystatechange=null)},h(function(){l||(l=1,n(1))},o),c?p.onload():m.parentNode.insertBefore(p,m)},e.yepnope.injectCss=function(e,n,r,o,a,c){var u,o=t.createElement("link"),n=c?s:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(u in r)o.setAttribute(u,r[u]);a||(m.parentNode.insertBefore(o,m),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},!function(e){var t=e.document,n=t.documentElement,r="overthrow-enabled",o="ontouchmove"in t,i="WebkitOverflowScrolling"in n.style||"msOverflowStyle"in n.style||!o&&e.screen.width>800||function(){var t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),r=n&&n[1],o=n&&r>=534;return t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&o||t.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&e.blackberry&&o||t.indexOf("PlayBook")>-1&&o&&-1===!t.indexOf("Android 2")||t.match(/Firefox\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&o||t.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&n&&r>=533}();e.overthrow={},e.overthrow.enabledClassName=r,e.overthrow.addClass=function(){-1===n.className.indexOf(e.overthrow.enabledClassName)&&(n.className+=" "+e.overthrow.enabledClassName)},e.overthrow.removeClass=function(){n.className=n.className.replace(e.overthrow.enabledClassName,"")},e.overthrow.set=function(){i&&e.overthrow.addClass()},e.overthrow.canBeFilledWithPoly=o,e.overthrow.forget=function(){e.overthrow.removeClass()},e.overthrow.support=i?"native":"none"}(this),function(e,t,n){if(t!==n){t.easing=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},t.tossing=!1;var r;t.toss=function(e,o){t.intercept();var i,a,s=0,c=e.scrollLeft,u=e.scrollTop,l={top:"+0",left:"+0",duration:50,easing:t.easing};if(o)for(var f in l)o[f]!==n&&(l[f]=o[f]);return"string"==typeof l.left?(l.left=parseFloat(l.left),i=l.left+c):(i=l.left,l.left=l.left-c),"string"==typeof l.top?(l.top=parseFloat(l.top),a=l.top+u):(a=l.top,l.top=l.top-u),t.tossing=!0,r=setInterval(function(){s++<l.duration?(e.scrollLeft=l.easing(s,c,l.left,l.duration),e.scrollTop=l.easing(s,u,l.top,l.duration)):(i!==e.scrollLeft&&(e.scrollLeft=i),a!==e.scrollTop&&(e.scrollTop=a),t.intercept())},1),{top:a,left:i,duration:t.duration,easing:t.easing}},t.intercept=function(){clearInterval(r),t.tossing=!1}}}(this,this.overthrow),function(e,t,n){if(t!==n){t.scrollIndicatorClassName="overthrow";var r=e.document,o=r.documentElement,i="native"===t.support,a=t.canBeFilledWithPoly,s=(t.configure,t.set),c=t.forget,u=t.scrollIndicatorClassName;t.closest=function(e,n){return!n&&e.className&&e.className.indexOf(u)>-1&&e||t.closest(e.parentNode)};var l=!1;t.set=function(){if(s(),!l&&!i&&a){e.overthrow.addClass(),l=!0,t.support="polyfilled",t.forget=function(){c(),l=!1,r.removeEventListener&&r.removeEventListener("touchstart",_,!1)};var u,f,d,p,h=[],m=[],v=function(){h=[],f=null},g=function(){m=[],d=null},y=function(e){p=u.querySelectorAll("textarea, input");for(var t=0,n=p.length;n>t;t++)p[t].style.pointerEvents=e},b=function(e,t){if(r.createEvent){var o,i=(!t||t===n)&&u.parentNode||u.touchchild||u;i!==u&&(o=r.createEvent("HTMLEvents"),o.initEvent("touchend",!0,!0),u.dispatchEvent(o),i.touchchild=u,u=i,i.dispatchEvent(e))}},_=function(e){if(t.intercept&&t.intercept(),v(),g(),u=t.closest(e.target),u&&u!==o&&!(e.touches.length>1)){y("none");var n=e,r=u.scrollTop,i=u.scrollLeft,a=u.offsetHeight,s=u.offsetWidth,c=e.touches[0].pageY,l=e.touches[0].pageX,p=u.scrollHeight,_=u.scrollWidth,x=function(e){var t=r+c-e.touches[0].pageY,o=i+l-e.touches[0].pageX,y=t>=(h.length?h[0]:0),x=o>=(m.length?m[0]:0);t>0&&p-a>t||o>0&&_-s>o?e.preventDefault():b(n),f&&y!==f&&v(),d&&x!==d&&g(),f=y,d=x,u.scrollTop=t,u.scrollLeft=o,h.unshift(t),m.unshift(o),h.length>3&&h.pop(),m.length>3&&m.pop()},w=function(){y("auto"),setTimeout(function(){y("none")},450),u.removeEventListener("touchmove",x,!1),u.removeEventListener("touchend",w,!1)};u.addEventListener("touchmove",x,!1),u.addEventListener("touchend",w,!1)}};r.addEventListener("touchstart",_,!1)}}}}(this,this.overthrow),function(e){e.overthrow.set()}(this),function(e){e.fn.caret=function(e){function t(e,t){var n=0,r=document.createRange();r.setStart(e,0),r.collapse(!0);for(var o,i=[e],a=!1;!a&&(o=i.pop());)if(3==o.nodeType){var s=n+o.length;t>=n&&s>=t&&(r.setStart(o,t-n),a=!0),n=s}else for(var c=o.childNodes.length;c--;)i.push(o.childNodes[c]);!a&&t>0&&r.setStart(e,e.childNodes.length);var u=window.getSelection();u.removeAllRanges(),u.addRange(r)}var n=this[0];if(0==arguments.length){if(window.getSelection){if(n.contentEditable&&"false"!==n.contentEditable){n.focus();var r=window.getSelection().getRangeAt(0),o=r.cloneRange();return o.selectNodeContents(n),o.setEnd(r.endContainer,r.endOffset),o.toString().length}return n.selectionStart}if(document.selection){if(n.focus(),n.contentEditable&&"false"!==n.contentEditable){var r=document.selection.createRange(),o=document.body.createTextRange();return o.moveToElementText(n),o.setEndPoint("EndToEnd",r),o.text.length}var e=0,i=n.createTextRange(),o=document.selection.createRange().duplicate(),a=o.getBookmark();for(i.moveToBookmark(a);0!==i.moveStart("character",-1);)e++;return e}return 0}if(window.getSelection)n.contentEditable&&"false"!==n.contentEditable?(n.focus(),t(n,e)):n.setSelectionRange(e,e);else if(document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(n),i.moveStart("character",e),i.collapse(!0),i.select()}}}(jQuery),function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var r=document.createElement("div"),o=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];r.className="fit-vids-style",r.id="fit-vids-style",r.style.display="none",r.innerHTML="&shy;<style>                 .fluid-width-video-wrapper {                   width: 100%;                                position: relative;                         padding: 0;                              }                                                                                       .fluid-width-video-wrapper iframe,          .fluid-width-video-wrapper object,          .fluid-width-video-wrapper embed {             position: absolute;                         top: 0;                                     left: 0;                                    width: 100%;                                height: 100%;                            }                                         </style>",o.parentNode.insertBefore(r,o)}return t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r=r.not("object object"),r.each(function(){var t=e(this);if(!("embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){var n="object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),o=n/r;if(!t.attr("id")){var i="fitvid"+Math.floor(999999*Math.random());t.attr("id",i)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),t.removeAttr("height").removeAttr("width")}})})}}(jQuery),!function(e,t,n,r){function o(e,t){var n=Math.max(0,e[0]-t[0],t[0]-e[1]),r=Math.max(0,e[2]-t[1],t[1]-e[3]);return n+r}function i(t,n,r,o){for(var i=t.length,o=o?"offset":"position",r=r||0;i--;){var a=t[i].el?t[i].el:e(t[i]),s=a[o]();s.left+=parseInt(a.css("margin-left"),10),s.top+=parseInt(a.css("margin-top"),10),n[i]=[s.left-r,s.left+a.outerWidth()+r,s.top-r,s.top+a.outerHeight()+r]}}function a(e,t){var n=t.offset();return{left:e.left-n.left,top:e.top-n.top}}function s(e,t,n){for(var r,t=[t.left,t.top],n=n&&[n.left,n.top],i=e.length,a=[];i--;)r=e[i],a[i]=[i,o(r,t),n&&o(r,n)];return a=a.sort(function(e,t){return t[1]-e[1]||t[2]-e[2]||t[0]-e[0]})}function c(t){this.options=e.extend({},d,t),this.containers=[],this.options.rootGroup||(this.scrollProxy=e.proxy(this.scroll,this),this.dragProxy=e.proxy(this.drag,this),this.dropProxy=e.proxy(this.drop,this),this.placeholder=e(this.options.placeholder),t.isValidTarget||(this.options.isValidTarget=r))}function u(t,n){this.el=t,this.options=e.extend({},f,n),this.group=c.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var r=this.rootGroup.options.itemPath;this.target=r?this.el.find(r):this.el,this.target.on(l.start,this.handle,e.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var l,f={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},d={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(e,t){e.css(t)},onDragStart:function(t){t.css({height:t.height(),width:t.width()}),t.addClass("dragged"),e("body").addClass("dragging")},onDrop:function(t){t.removeClass("dragged").removeAttr("style"),e("body").removeClass("dragging")},onMousedown:function(e,t,n){return n.target.nodeName.match(/^(input|select)$/i)?void 0:(n.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(t,n,r){return t=e.extend({},t.data()),r?[n]:(n[0]&&(t.children=n),delete t.subContainers,delete t.sortable,t)},tolerance:0},p={},h=0,m={left:0,top:0,bottom:0,right:0};l={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},c.get=function(e){return p[e.group]||(e.group===r&&(e.group=h++),p[e.group]=new c(e)),p[e.group]},c.prototype={dragInit:function(t,n){this.$document=e(n.el[0].ownerDocument),this.item=e(t.target).closest(this.options.itemSelector),this.itemContainer=n,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,d.onMousedown,t)&&(this.setPointer(t),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(e){if(!this.dragging){if(!this.distanceMet(e)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,d.onDragStart,e),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(e),this.options.onDrag(this.item,a(this.pointer,this.item.offsetParent()),d.onDrag,e);var t=e.pageX||e.originalEvent.pageX,e=e.pageY||e.originalEvent.pageY,n=this.sameResultBox,r=this.options.tolerance;(!n||n.top-r>e||n.bottom+r<e||n.left-r>t||n.right+r<t)&&(this.searchValidTarget()||this.placeholder.detach())},drop:function(e){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,d.onCancel,e),this.options.onDrop(this.item,this.getContainer(this.item),d.onDrop,e),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=r,this.dragging=!1)},searchValidTarget:function(e,t){e||(e=this.relativePointer||this.pointer,t=this.lastRelativePointer||this.lastPointer);for(var n=s(this.getContainerDimensions(),e,t),o=n.length;o--;){var i=n[o][0];if((!n[o][1]||this.options.pullPlaceholder)&&(i=this.containers[i],!i.disabled)){if(!this.$getOffsetParent())var c=i.getItemOffsetParent(),e=a(e,c),t=a(t,c);if(i.searchValidTarget(e,t))return!0}}this.sameResultBox&&(this.sameResultBox=r)},movePlaceholder:function(e,t,n,r){var o=this.lastAppendedItem;(r||!o||o[0]!==t[0])&&(t[n](this.placeholder),this.lastAppendedItem=t,this.sameResultBox=r,this.options.afterMove(this.placeholder,e,t))},getContainerDimensions:function(){return this.containerDimensions||i(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(e){return e.closest(this.options.containerSelector).data(n)},$getOffsetParent:function(){if(this.offsetParent===r){var e=this.containers.length-1,t=this.containers[e].getItemOffsetParent();if(!this.options.rootGroup)for(;e--;)if(t[0]!=this.containers[e].getItemOffsetParent()[0]){t=!1;break}this.offsetParent=t}return this.offsetParent},setPointer:function(e){if(e=this.getPointer(e),this.$getOffsetParent()){var t=a(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=t}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(e){return e=this.getPointer(e),Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(e){return{left:e.pageX||e.originalEvent.pageX,top:e.pageY||e.originalEvent.pageY}},setupDelayTimer:function(){var e=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){e.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(t){var n=this;e.each(["drag","drop","scroll"],function(e,r){n.$document[t](l[r],n[r+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=r},clearDimensions:function(){this.traverse(function(e){e._clearDimensions()})},traverse:function(e){e(this);for(var t=this.containers.length;t--;)this.containers[t].traverse(e)},_clearDimensions:function(){this.containerDimensions=r},_destroy:function(){p[this.options.group]=r}},u.prototype={dragInit:function(e){var t=this.rootGroup;!this.disabled&&!t.dragInitDone&&this.options.drag&&this.isValidDrag(e)&&t.dragInit(e,this)},isValidDrag:function(e){return 1==e.which||"touchstart"==e.type&&1==e.originalEvent.touches.length},searchValidTarget:function(e,t){var n=s(this.getItemDimensions(),e,t),r=n.length,o=this.rootGroup,i=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!r&&i)return o.movePlaceholder(this,this.target,"append"),!0;for(;r--;)if(o=n[r][0],!n[r][1]&&this.hasChildGroup(o)){if(this.getContainerGroup(o).searchValidTarget(e,t))return!0}else if(i)return this.movePlaceholder(o,e),!0},movePlaceholder:function(t,n){var r=e(this.items[t]),o=this.itemDimensions[t],i="after",a=r.outerWidth(),s=r.outerHeight(),c=r.offset(),c={left:c.left,right:c.left+a,top:c.top,bottom:c.top+s};this.options.vertical?n.top<=(o[2]+o[3])/2?(i="before",c.bottom-=s/2):c.top+=s/2:n.left<=(o[0]+o[1])/2?(i="before",c.right-=a/2):c.left+=a/2,this.hasChildGroup(t)&&(c=m),this.rootGroup.movePlaceholder(this,r,i,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),i(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var e=this.el;return"relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(e){return this.options.nested&&this.getContainerGroup(e)},getContainerGroup:function(t){var o=e.data(this.items[t],"subContainers");if(o===r){var i=this.$getChildren(this.items[t],"container"),o=!1;i[0]&&(o=e.extend({},this.options,{rootGroup:this.rootGroup,group:h++}),o=i[n](o).data(n).group),e.data(this.items[t],"subContainers",o)}return o},$getChildren:function(t,n){var r=this.rootGroup.options,o=r[n+"Path"],r=r[n+"Selector"],t=e(t);return o&&(t=t.find(o)),t.children(r)},_serialize:function(t,n){var r=this,o=this.$getChildren(t,n?"item":"container").not(this.options.exclude).map(function(){return r._serialize(e(this),!n)}).get();return this.rootGroup.options.serialize(t,o,n)},traverse:function(t){e.each(this.items||[],function(){var n=e.data(this,"subContainers");n&&n.traverse(t)}),t(this)},_clearDimensions:function(){this.itemDimensions=r},_destroy:function(){var t=this;this.target.off(l.start,this.handle),this.el.removeData(n),this.options.drop&&(this.group.containers=e.grep(this.group.containers,function(e){return e!=t})),e.each(this.items||[],function(){e.removeData(this,"subContainers")})}};var v={enable:function(){this.traverse(function(e){e.disabled=!1})},disable:function(){this.traverse(function(e){e.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(e){e._clearDimensions()})},destroy:function(){this.traverse(function(e){e._destroy()})}};e.extend(u.prototype,v),e.fn[n]=function(t){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var i=e(this),a=i.data(n);return a&&v[t]?v[t].apply(a,o)||this:(!a&&(t===r||"object"==typeof t)&&i.data(n,new u(i,t)),this)})}}(jQuery,window,"sortable"),function(e){e.fn.hoverIntent=function(t,n,r){var o={interval:100,sensitivity:7,timeout:0};o="object"==typeof t?e.extend(o,t):e.isFunction(n)?e.extend(o,{over:t,out:n,selector:r}):e.extend(o,{over:t,out:t,selector:n});var i,a,s,c,u=function(e){i=e.pageX,a=e.pageY},l=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(s-i)+Math.abs(c-a)<o.sensitivity?(e(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=1,o.over.apply(n,[t])):(s=i,c=a,n.hoverIntent_t=setTimeout(function(){l(t,n)},o.interval),void 0)},f=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,o.out.apply(t,[e])},d=function(t){var n=jQuery.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"==t.type?(s=n.pageX,c=n.pageY,e(r).on("mousemove.hoverIntent",u),1!=r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){l(n,r)},o.interval))):(e(r).off("mousemove.hoverIntent",u),1==r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){f(n,r)},o.timeout)))};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},o.selector)}}(jQuery),function(e){e.simplePlaceholder={placeholderClass:null,hidePlaceholder:function(){var t=e(this);t.val()==t.attr("placeholder")&&t.data(e.simplePlaceholder.placeholderData)&&t.val("").removeClass(e.simplePlaceholder.placeholderClass).data(e.simplePlaceholder.placeholderData,!1)},showPlaceholder:function(){var t=e(this);""==t.val()&&t.val(t.attr("placeholder")).addClass(e.simplePlaceholder.placeholderClass).data(e.simplePlaceholder.placeholderData,!0)},preventPlaceholderSubmit:function(){return e(this).find(".simple-placeholder").each(function(t){var n=e(this);n.val()==n.attr("placeholder")&&n.data(e.simplePlaceholder.placeholderData)&&n.val("")}),!0}},e.fn.simplePlaceholder=function(t){if(void 0==document.createElement("input").placeholder){var n={placeholderClass:"placeholding",placeholderData:"simplePlaceholder.placeholding"};t&&e.extend(n,t),e.extend(e.simplePlaceholder,n),this.each(function(){var t=e(this);t.focus(e.simplePlaceholder.hidePlaceholder),t.blur(e.simplePlaceholder.showPlaceholder),t.data(e.simplePlaceholder.placeholderData,!1),""==t.val()&&(t.val(t.attr("placeholder")),t.addClass(e.simplePlaceholder.placeholderClass),t.data(e.simplePlaceholder.placeholderData,!0)),t.addClass("simple-placeholder"),e(this.form).submit(e.simplePlaceholder.preventPlaceholderSubmit)})}return this}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function n(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var o=r.closest("[type=submit]");if(0===o.length)return;n=o[0]}var i=this;if(i.clk=n,"image"==n.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=r.offset();i.clk_x=t.pageX-a.left,i.clk_y=t.pageY-a.top}else i.clk_x=t.pageX-n.offsetLeft,i.clk_y=t.pageY-n.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function r(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var o={};o.fileapi=void 0!==e("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function n(n){var r,o,i=e.param(n,t.traditional).split("&"),a=i.length,s=[];for(r=0;a>r;r++)i[r]=i[r].replace(/\+/g," "),o=i[r].split("="),s.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return s}function a(r){for(var o=new FormData,i=0;r.length>i;i++)o.append(r[i].name,r[i].value);if(t.extraData){var a=n(t.extraData);for(i=0;a.length>i;i++)a[i]&&o.append(a[i][0],a[i][1]);
}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:c||"POST"});t.uploadProgress&&(s.xhr=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){var n=0,r=e.loaded||e.position,o=e.total;e.lengthComputable&&(n=Math.ceil(100*(r/o))),t.uploadProgress(e,r,o,n)},!1),n}),s.data=null;var u=s.beforeSend;return s.beforeSend=function(e,n){n.data=t.formData?t.formData:o,u&&u.call(this,e,n)},e.ajax(s)}function s(n){function o(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){r("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){r("cannot get iframe.contentDocument: "+n),t=e.document}return t}function a(){function t(){try{var e=o(g).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){r("Server abort: ",n," (",n.name,")"),s(T),w&&clearTimeout(w),w=void 0}}var n=f.attr2("target"),i=f.attr2("action");S.setAttribute("target",h),(!c||/post/i.test(c))&&S.setAttribute("method","POST"),i!=d.url&&S.setAttribute("action",d.url),d.skipEncodingOverride||c&&!/post/i.test(c)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(w=setTimeout(function(){x=!0,s(E)},d.timeout));var a=[];try{if(d.extraData)for(var u in d.extraData)d.extraData.hasOwnProperty(u)&&(e.isPlainObject(d.extraData[u])&&d.extraData[u].hasOwnProperty("name")&&d.extraData[u].hasOwnProperty("value")?a.push(e('<input type="hidden" name="'+d.extraData[u].name+'">').val(d.extraData[u].value).appendTo(S)[0]):a.push(e('<input type="hidden" name="'+u+'">').val(d.extraData[u]).appendTo(S)[0]));d.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{S.submit()}catch(l){var p=document.createElement("form").submit;p.apply(S)}}finally{S.setAttribute("action",i),n?S.setAttribute("target",n):f.removeAttr("target"),e(a).remove()}}function s(t){if(!y.aborted&&!I){if(N=o(g),N||(r("cannot access response document"),t=T),t===E&&y)return y.abort("timeout"),void C.reject(y,"timeout");if(t==T&&y)return y.abort("server abort"),void C.reject(y,"error","server abort");if(N&&N.location.href!=d.iframeSrc||x){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var n,i="success";try{if(x)throw"timeout";var a="xml"==d.dataType||N.XMLDocument||e.isXMLDoc(N);if(r("isXml="+a),!a&&window.opera&&(null===N.body||!N.body.innerHTML)&&--D)return r("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var c=N.body?N.body:N.documentElement;y.responseText=c?c.innerHTML:null,y.responseXML=N.XMLDocument?N.XMLDocument:N,a&&(d.dataType="xml"),y.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e.toLowerCase()]},c&&(y.status=Number(c.getAttribute("status"))||y.status,y.statusText=c.getAttribute("statusText")||y.statusText);var u=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(u);if(l||d.textarea){var f=N.getElementsByTagName("textarea")[0];if(f)y.responseText=f.value,y.status=Number(f.getAttribute("status"))||y.status,y.statusText=f.getAttribute("statusText")||y.statusText;else if(l){var h=N.getElementsByTagName("pre")[0],m=N.getElementsByTagName("body")[0];h?y.responseText=h.textContent?h.textContent:h.innerText:m&&(y.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==u&&!y.responseXML&&y.responseText&&(y.responseXML=P(y.responseText));try{j=L(y,u,d)}catch(b){i="parsererror",y.error=n=b||i}}catch(b){r("error caught: ",b),i="error",y.error=n=b||i}y.aborted&&(r("upload aborted"),i=null),y.status&&(i=y.status>=200&&300>y.status||304===y.status?"success":"error"),"success"===i?(d.success&&d.success.call(d.context,j,"success",y),C.resolve(y.responseText,"success",y),p&&e.event.trigger("ajaxSuccess",[y,d])):i&&(void 0===n&&(n=y.statusText),d.error&&d.error.call(d.context,y,i,n),C.reject(y,"error",n),p&&e.event.trigger("ajaxError",[y,d,n])),p&&e.event.trigger("ajaxComplete",[y,d]),p&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,y,i),I=!0,d.timeout&&clearTimeout(w),setTimeout(function(){d.iframeTarget?v.attr("src",d.iframeSrc):v.remove(),y.responseXML=null},100)}}}var u,l,d,p,h,v,g,y,b,_,x,w,S=f[0],C=e.Deferred();if(C.abort=function(e){y.abort(e)},n)for(l=0;m.length>l;l++)u=e(m[l]),i?u.prop("disabled",!1):u.removeAttr("disabled");if(d=e.extend(!0,{},e.ajaxSettings,t),d.context=d.context||d,h="jqFormIO"+(new Date).getTime(),d.iframeTarget?(v=e(d.iframeTarget),_=v.attr2("name"),_?h=_:v.attr2("name",h)):(v=e('<iframe name="'+h+'" src="'+d.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(o){}v.attr("src",d.iframeSrc),y.error=n,d.error&&d.error.call(d.context,y,n,t),p&&e.event.trigger("ajaxError",[y,d,n]),d.complete&&d.complete.call(d.context,y,n)}},p=d.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[y,d]),d.beforeSend&&d.beforeSend.call(d.context,y,d)===!1)return d.global&&e.active--,C.reject(),C;if(y.aborted)return C.reject(),C;b=S.clk,b&&(_=b.name,_&&!b.disabled&&(d.extraData=d.extraData||{},d.extraData[_]=b.value,"image"==b.type&&(d.extraData[_+".x"]=S.clk_x,d.extraData[_+".y"]=S.clk_y)));var E=1,T=2,k=e("meta[name=csrf-token]").attr("content"),O=e("meta[name=csrf-param]").attr("content");O&&k&&(d.extraData=d.extraData||{},d.extraData[O]=k),d.forceSync?a():setTimeout(a,10);var j,N,I,D=50,P=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},M=e.parseJSON||function(e){return window.eval("("+e+")")},L=function(t,n,r){var o=t.getResponseHeader("content-type")||"",i="xml"===n||!n&&o.indexOf("xml")>=0,a=i?t.responseXML:t.responseText;return i&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(a=r.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&o.indexOf("json")>=0?a=M(a):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(a)),a};return C}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var c,u,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),c=t.type||this.attr2("method"),u=t.url||this.attr2("action"),l="string"==typeof u?e.trim(u):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:c||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var d={};if(this.trigger("form-pre-serialize",[this,t,d]),d.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var h,m=[],v=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,h=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,d]),d.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,p);h&&(g=g?g+"&"+h:h),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var y=[];if(t.resetForm&&y.push(function(){f.resetForm()}),t.clearForm&&y.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};y.push(function(n){var r=t.replaceTarget?"replaceWith":"html";e(t.target)[r](n).each(b,arguments)})}else t.success&&y.push(t.success);if(t.success=function(e,n,r){for(var o=t.context||this,i=0,a=y.length;a>i;i++)y[i].apply(o,[e,n,r||f,f])},t.error){var _=t.error;t.error=function(e,n,r){var o=t.context||this;_.apply(o,[e,n,r,f])}}if(t.complete){var x=t.complete;t.complete=function(e,n){var r=t.context||this;x.apply(r,[e,n,f])}}var w=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),S=w.length>0,C="multipart/form-data",E=f.attr("enctype")==C||f.attr("encoding")==C,T=o.fileapi&&o.formdata;r("fileAPI :"+T);var k,O=(S||E)&&!T;t.iframe!==!1&&(t.iframe||O)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){k=s(v)}):k=s(v):k=(S||E)&&T?a(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",k);for(var j=0;m.length>j;j++)m[j]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(o){if(o=o||{},o.delegation=o.delegation&&e.isFunction(e.fn.on),!o.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(r("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(o)}),this):(r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return o.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,o,t).on("click.form-plugin",this.selector,o,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",o,t).bind("click.form-plugin",o,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var r=[];if(0===this.length)return r;var i=this[0],a=t?i.getElementsByTagName("*"):i.elements;if(!a)return r;var s,c,u,l,f,d,p;for(s=0,d=a.length;d>s;s++)if(f=a[s],u=f.name,u&&!f.disabled)if(t&&i.clk&&"image"==f.type)i.clk==f&&(r.push({name:u,value:e(f).val(),type:f.type}),r.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}));else if(l=e.fieldValue(f,!0),l&&l.constructor==Array)for(n&&n.push(f),c=0,p=l.length;p>c;c++)r.push({name:u,value:l[c]});else if(o.fileapi&&"file"==f.type){n&&n.push(f);var h=f.files;if(h.length)for(c=0;h.length>c;c++)r.push({name:u,value:h[c],type:f.type});else r.push({name:u,value:"",type:f.type})}else null!==l&&void 0!==l&&(n&&n.push(f),r.push({name:u,value:l,type:f.type,required:f.required}));if(!t&&i.clk){var m=e(i.clk),v=m[0];u=v.name,u&&!v.disabled&&"image"==v.type&&(r.push({name:u,value:m.val()}),r.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(r){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var i=0,a=o.length;a>i;i++)n.push({name:r,value:o[i]});else null!==o&&void 0!==o&&n.push({name:this.name,value:o})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,o=this.length;o>r;r++){var i=this[r],a=e.fieldValue(i,t);null===a||void 0===a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var r=t.name,o=t.type,i=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!r||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var a=t.selectedIndex;if(0>a)return null;for(var s=[],c=t.options,u="select-one"==o,l=u?a+1:c.length,f=u?a:0;l>f;f++){var d=c[f];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),u)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,o=this.tagName.toLowerCase();n.test(r)||"textarea"==o?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){"use strict";return deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t;t=e.fastClickScrollParent},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],deviceIsIOS){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,r,o,i,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(i=e.changedTouches[0],a=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=a.tagName.toLowerCase(),"label"===r){if(t=this.findControl(a)){if(this.focus(a),deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-n>100||deviceIsIOS&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(a),this.sendClick(a,e),deviceIsIOS&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(o=a.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:!e.cancelable||this.needsClick(this.targetElement)&&!this.cancelNextClick?!0:(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,n,r;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e,t){"use strict";return new FastClick(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;var JSON;JSON||(JSON={}),function(){function str(e,t){var n,r,o,i,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;i>n;n+=1)a[n]=str(n,c)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,c),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return 10>e?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?void(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var i=function(e){var t=this;t._events=e||[],t._listeners={}};i.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},i.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},i.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},i.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,r=[];for(n=0;e>n;n++)r.push(a.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var r=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=r.protocol+t),0===t.indexOf("/")&&(t=r.protocol+"//"+r.host+t),t=t.replace(/[/]+$/,"")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","\ufeff":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},f=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(e){return u.lastIndex=0,u.test(e)&&(e=e.replace(u,function(e){return l[e]})),'"'+e+'"'},p=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=d(e);return f.lastIndex=0,f.test(t)?(c||(c=p(f)),t.replace(f,function(e){return c[e]})):t};var h=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<h.length;t++){var n=h[t];e[n]=C[n]&&C[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=h);for(var i=0;i<t.length;i++){var a=t[i];r[a]=e[a]}var s=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(m in t)){var r={};t[m]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[m](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var v={},g=!1,y=function(){for(var e in v)v[e](),delete v[e]},b=function(){g||(g=!0,y())};n.attachEvent("unload",b),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,g&&n.delay(y),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,r){var o,i,a=e.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(i))},u=function(e){a&&(c(),r(e))},l=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},e.body.appendChild(a),o=setTimeout(function(){u("timeout")},15e3),i=n.unload_add(c),{post:l,cleanup:c,loaded:s}},n.createHtmlfile=function(e,r){var o,i,a,c=new ActiveXObject("htmlfile"),u=function(){clearTimeout(o)},l=function(){c&&(u(),n.unload_del(i),a.parentNode.removeChild(a),a=c=null,CollectGarbage())},f=function(e){c&&(l(),r(e))},d=function(e,t){try{
a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[s]=t[s];var p=c.createElement("div");return c.body.appendChild(p),a=c.createElement("iframe"),p.appendChild(a),a.src=e,o=setTimeout(function(){f("timeout")},15e3),i=n.unload_add(l),{post:d,cleanup:l,loaded:u}};var _=function(){};_.prototype=new i(["chunk","finish"]),_.prototype._start=function(e,r,o,i){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,r,!0)}catch(c){return a.emit("finish",0,""),void a._cleanup()}if(i&&i.no_credentials||(a.xhr.withCredentials="true"),i&&i.headers)for(var u in i.headers)a.xhr.setRequestHeader(u,i.headers[u]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(o)},_.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},_.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var x=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};x.prototype=new _;var w=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};w.prototype=new _;var S=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};S.prototype=new i(["chunk","finish"]),S.prototype._start=function(e,t,r){var o=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=i.ontimeout=i.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},o.xdr=i,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(s){a()}},S.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},S.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:F.enabled()?3:4};var C=function(e,r,o){if(this===t)return new C(e,r,o);var i,a=this;a._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(a._options,o),a._base_url=n.amendUrl(e),a._server=a._options.server||n.random_number_string(1e3),a._options.protocols_whitelist&&a._options.protocols_whitelist.length?i=a._options.protocols_whitelist:(i="string"==typeof r&&r.length>0?[r]:n.isArray(r)?r:null,i&&a._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),a._protocols=[],a.protocol=null,a.readyState=C.CONNECTING,a._ir=W(a._base_url),a._ir.onfinish=function(e,t){a._ir=null,e?(a._options.info&&(e=n.objectExtend(e,a._options.info)),a._options.rtt&&(t=a._options.rtt),a._applyInfo(e,t,i),a._didClose()):a._didClose(1002,"Can't connect to server",!0)}};C.prototype=new r,C.version="0.3.4",C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},C.prototype._dispatchOpen=function(){var e=this;e.readyState===C.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=C.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},C.prototype._dispatchMessage=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new o("message",{data:e}))},C.prototype._dispatchHeartbeat=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new o("heartbeat",{}))},C.prototype._didClose=function(e,t,r){var i=this;if(i.readyState!==C.CONNECTING&&i.readyState!==C.OPEN&&i.readyState!==C.CLOSING)throw new Error("INVALID_STATE_ERR");i._ir&&(i._ir.nuke(),i._ir=null),i._transport&&(i._transport.doCleanup(),i._transport=null);var a=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&i.readyState===C.CONNECTING&&!r){if(i._try_next_protocol(a))return;a=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}i.readyState=C.CLOSED,n.delay(function(){i.dispatchEvent(a)})},C.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=JSON.parse(e.slice(1)||"[]"),o=0;o<r.length;o++)t._dispatchMessage(r[o]);break;case"m":var r=JSON.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=JSON.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},C.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(C[o]&&C[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(C[o]&&C[o].enabled(r._options)){var i=C[o].roundTrips||1,a=(r._options.rto||0)*i||5e3;r._transport_tref=n.delay(a,function(){r.readyState===C.CONNECTING&&r._didClose(2007,"Transport timeouted")});var s=n.random_string(8),c=r._base_url+"/"+r._server+"/"+s;return r._debug("Opening transport:",o," url:"+c," RTO:"+r._options.rto),r._transport=new C[o](r,c,r._base_url),!0}r._debug("Skipping transport:",o)}},C.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return r.readyState!==C.CONNECTING&&r.readyState!==C.OPEN?!1:(r.readyState=C.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},C.prototype.send=function(e){var t=this;if(t.readyState===C.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===C.OPEN&&t._transport.doSend(n.quote(""+e)),!0},C.prototype._applyInfo=function(t,r,o){var i=this;i._options.info=t,i._options.rtt=r,i._options.rto=n.countRTO(r),i._options.info.null_origin=!e.domain;var a=n.probeProtocols();i._protocols=n.detectProtocols(a,o,t)};var E=C.websocket=function(e,r){var o=this,i=r+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),o.ri=e,o.url=i;var a=t.WebSocket||t.MozWebSocket;o.ws=new a(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(e){this.ws.send("["+e+"]")},E.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},E.enabled=function(){return!!t.WebSocket||!!t.MozWebSocket},E.roundTrips=2;var T=function(){};T.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},T.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},T.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},T.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},T.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var k=function(t,r,o){var i=this;if(!("_send_form"in i)){var a=i._send_form=e.createElement("form"),s=i._send_area=e.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),e.body.appendChild(a)}var a=i._send_form,s=i._send_area,c="a"+n.random_string(8);a.target=c,a.action=t+"/jsonp_send?i="+c;var u;try{u=e.createElement('<iframe name="'+c+'">')}catch(l){u=e.createElement("iframe"),u.name=c}u.id=c,a.appendChild(u),u.style.display="none";try{s.value=r}catch(f){n.log("Your browser is seriously broken. Go home! "+f.message)}a.submit();var d=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,n.delay(500,function(){u.parentNode.removeChild(u),u=null}),s.value="",o(!0))};return u.onerror=u.onload=d,u.onreadystatechange=function(e){"complete"==u.readyState&&d()},d},O=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e,t){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},j=function(t,r){var o,i,a=e.createElement("script"),s=function(e){i&&(i.parentNode.removeChild(i),i=null),a&&(clearTimeout(o),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,r(e),r=null)},c=!1,u=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(e){u||(u=setTimeout(function(){c||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(e){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(e){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){c=!0;try{a.onclick()}catch(t){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof a.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))i=e.createElement("script"),i.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=i.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(l){}a.async=!0}"undefined"!=typeof a.async&&(a.async=!0),o=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var f=e.getElementsByTagName("head")[0];return f.insertBefore(a,f.firstChild),i&&f.insertBefore(i,f.firstChild),s},N=C["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(k),r._schedule_recv()};N.prototype=new T,N.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=I(e.trans_url+"/jsonp",j,t)},N.enabled=function(){return!0},N.need_body=!0,N.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var I=function(e,r,o){var i="a"+n.random_string(6),a=e+"?c="+escape(s+"."+i),c=0,u=function(e){switch(c){case 0:delete t[s][i],o(e);break;case 1:o(e),c=2;break;case 2:delete t[s][i]}},l=r(a,u);t[s][i]=l;var f=function(){t[s][i]&&(c=1,t[s][i](n.closeFrame(1e3,"JSONP user aborted read")))};return f},D=function(){};D.prototype=new T,D.prototype.run=function(e,t,n,r,o){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(O(o)),i.poll=new K(e,r,t+n,o)},D.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var P=C["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",re,n.XHRCorsObject)};P.prototype=new D,P.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},P.roundTrips=2,P.need_body=!0;var M=C["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",re,n.XDRObject)};M.prototype=new D,M.enabled=function(){return!!t.XDomainRequest},M.roundTrips=2;var L=C["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XHRCorsObject)};L.prototype=new D,L.enabled=P.enabled,L.roundTrips=2;var A=C["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XDRObject)};A.prototype=new D,A.enabled=M.enabled,A.roundTrips=2;var F=function(){};F.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var i=r+"/iframe.html";o.ri._options.devel&&(i+="?t="+ +new Date),o.window_id=n.random_string(8),i+="#"+o.window_id,o.iframeObj=n.createIframe(i,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},F.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},F.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([C.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},F.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},F.prototype.doSend=function(e){this.postMessage("m",e)},F.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var R,X=function(e,r){parent!==t?parent.postMessage(R+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},H=function(){};H.prototype._didClose=function(e,t){X("t",n.closeFrame(e,t))},H.prototype._didMessage=function(e){X("t",e)},H.prototype._doSend=function(e){this._transport.doSend(e)},H.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,C.bootstrap_iframe=function(){var r;R=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),i=e.data.slice(8,9),a=e.data.slice(9);if(o===R)switch(i){case"s":var s=JSON.parse(a),c=s[0],u=s[1],l=s[2],f=s[3];if(c!==C.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+C.version+'".'),!n.flatUrl(l)||!n.flatUrl(f))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(l)||!n.isSameOriginUrl(f))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,l,f])+")");r=new H,r._transport=new H[u](r,l,f);break;case"m":r._doSend(a);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),X("s")};var J=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};J.prototype=new i(["finish"]),J.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),i=new t("GET",e+"/info"),a=n.delay(8e3,function(){i.ontimeout()});i.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-o,i=JSON.parse(t);"object"!=typeof i&&(i={}),r.emit("finish",i,n)}else r.emit("finish")},i.ontimeout=function(){i.close(),r.emit("finish")}};var B=function(t){var r=this,o=function(){var e=new F;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),o=n[0],i=n[1];r.emit("finish",o,i)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};B.prototype=new i(["finish"]);var G=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};G.prototype=new i(["finish"]);var W=function(e){if(n.isSameOriginUrl(e))return new J(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new J(e,n.XHRLocalObject);case 2:return new J(e,n.XDRObject);case 3:return new B(e);default:return new G}},q=H["w-iframe-info-receiver"]=function(e,t,r){var o=new J(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}};q.prototype.doCleanup=function(){};var U=C["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};U.prototype=new F,U.enabled=function(){return"EventSource"in t&&F.enabled()},U.need_body=!0,U.roundTrips=3;var z=H["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",Z,n.XHRLocalObject)};z.prototype=new D;var $=C["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};$.prototype=new F,$.enabled=function(){return t.XMLHttpRequest&&F.enabled()},$.need_body=!0,$.roundTrips=3;var V=H["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XHRLocalObject)};V.prototype=new D;var Y=C["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Y.prototype=new F,Y.enabled=function(){return F.enabled()},Y.need_body=!0,Y.roundTrips=3;var Q=H["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",ne,n.XHRLocalObject)};Q.prototype=new D;var K=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};K.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},K.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var Z=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,i){var a=i?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:a}))})}};Z.prototype=new r,Z.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var ee,te=function(){if(void 0===ee)if("ActiveXObject"in t)try{ee=!!new ActiveXObject("htmlfile")}catch(e){}else ee=!1;return ee},ne=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+r.id);var i,a=te()?n.createHtmlfile:n.createIframe;t[s][r.id]={start:function(){i.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){i.cleanup(),r.iframe_close=i=null,delete t[s][r.id],r.dispatchEvent(new o("close",{reason:n}))},i=a(e,function(e){r.iframe_close({},"permanent")})};ne.prototype=new r,ne.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var re=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var i=t.slice(r),a=i.indexOf("\n");if(-1===a)break;r+=a+1;var s=i.slice(0,a);n.dispatchEvent(new o("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return re.prototype=new r,re.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},C.getUtils=function(){return n},C.getIframeTransport=function(){return F},C}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS});
